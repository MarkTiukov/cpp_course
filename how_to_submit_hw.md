# Как сдавать задачи в систему

***Note*** У каждого из вас уже должен быть доступ в гитлаб и в систему akhcheck. Если это для вас неверно заполните форму для проблем (есть в канале курса).

Сдача задачи состоит из двух пунктов: сдача в гитлаб и сдача в akhchek

Заходим на страничку https://gitlab.akhcheck.ru/cpp_course_2425 и логинимся в gitlab. 

Видим перед собой два репозитория: `testing_repo` и `cpp_course2425_{your_name}_2024`. 

### Описание testing_repo

![testing_repo](/images/testing_repo.png "Тестирующий репозиторий")

В этом репозитории для каждой задачи лежат тесты и другие файлы для тестирования. В этот репозиторий коммитить студентам ничего не нужно) (и запрещено! Кара будет жесткой, лучше не испытывайте свою удачу =) )

Файлы для задачи обычно следующие:

1. `CMakeLists.txt` = файл для cmake в котором написано как собирать ваш проект. В том числе там линкуется библиотека GoogleTests, с помощью которой и реализованы тесты.
2. `banned_words.json` = json файл в котором перечислены слова, которые нельзя использовать в вашем решении 
3. `tests.cpp` = файл с тестами 
4. `test.sh` = bash скрипт который и тестирует вашу задачу. Про этапы тестирования будет ниже
5. `valgrind_parser.py` = проверка лога valgrind 
6. `banned_words_checker.py` = проверка наличия в вашем коде запрещенных слов
7. `.clang-tidy` и `.clang-format` = файлы с описанием кодстайла

![typical_task](/images/task.png "Типичная задача")

Тестирующие стадии следующие (в порядке в котором они запускаются):

1. `banned-words` - проверяет ваш код на наличие забаненых слов
2. `clang-tidy` - утилита для проверки codestyle, которая проверяет наименования переменных и тд.  
3. `clang-format` - утилита для проверки форматирования кода (проверяет пробелы отступы и тд)
4. `build with clang` - собирает ваш код с использованием компилятора clang (спойлер: код собирается с самыми жесткими флагами, их можно посмотреть в CMakeLists.txt)
5. `build with g++` - собирает ваш код с использованием компилятора g++
6. `tests` - запускает google тесты (в файлике tests.cpp)
7. `valgring` - запускает те же тесты но под valgrind (утилита для проверки на утечки памяти)

Если какая-то из стадий провалена тестирование дальше не идет.

### Описание cpp_course2425_{your_name}_2024

В этот репозиторий мы и сдаем задачи. Архитектура тут простая: для каждой задачи заведена соответствующая ветка. В этой ветке создана директория `task_name`, в которой лежит заготовок решения. Вам нужно просто отредактировать нужный файл (обычно это `task_name.hpp` но бывает и `.cpp`).

### Процесс сдачи домашнего задания в gitlab

***Note*** автор отказывается писать точные шаги про git, потому что это было на семинарах :) 

Допустим мы решаем задачу `task_name`

0. Клонируем репозиторий cpp_course2425_{your_name}_2024 (клонировать **лучше по ssh**)
1. Переходим на ветку `task_name`
2. Редактируем соответстующий файл (обычно это `task_name.hpp`). ВНИМАНИЕ: новых файлов заводить не нужно! 
3. Тестируем наш код каким-либо способом (не забудьте удалить лишние файлы, привет `.gitignore`)
4. Тестируем наш код на codestyle (можно локально установить *clang-tidy* и *clang-format*) чтобы не грузить лишний раз систему
5. Коммитим файлы с решением (ВНИМАНИЕ: не коммитим ничего лишнего! Если так будет несколько раз то баллы будут снижаться!)
6. `git push`
7. Создаем MR на gitlab (вкладка MergeRequests на странице проекта). Лайфхак: при пуше гитлаб выведет вам ссылку для создания МРа
8. Дожидаемся работы pipelin'а. Допустим он красный (красный крестик в МРе)
9. Кликаем на красный крестик и читаем лог проверки. По логу понимаем что нужно исправить
10. Повторяем пункты 2-9 пока не получим зеленый pipeline.

11. С gitlab мы закончили, вы awesome! Переходим к akhcheck (code-review)

### Процесс сдачи домашнего задания в akhcheck для прохождения code-review

1. Открываем `https://akhcheck.ru/` и логинемся в систему
2. Переходим на вкладку "курсы" и выбираем "Программирование на языке C++ (2024-2024)"
3. Переходим к нужной задаче
4. В поле "ссылка на github" вводим ссылку на наш MR (ВНИМАНИЕ: именно на MR, ссылка вида https://gitlab.akhcheck.ru/cpp_course_2425/{repo_name}/-/merge_requests/{id})
5. Нажимаем "отправить на проверку"
6. Переходим на вкладку "ваши посылки" внизу задачи
7. Читаем статус задачи и лог отработки системы. Если вы все сделали правильно, то для задачи без ревью будет статус Accepted и выставлен бал (а для задачи с ревью будет ожидает ревью). 
8. Если сделали чет не так то читаем лог и исправляемся. Если вообще ничего не получается просим помочь семера/ассистента 
9. Если задача была с ревью то ждем проверки от семера. Он напишет вам комментарии в гитлабе и отправит на доработку (ну или примет задачу сразу). Идем исправлять задачу и повторяем процесс заново.
