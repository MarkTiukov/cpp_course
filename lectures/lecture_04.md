### 6. Expressions and operators

Неформально, выражение -- это комбинация литералов, идентификаторов и операторов. Для формального определения необходимо перечислить всю грамматику языка, чем мы заниматься не будем

#### 1. Операторы в C++:

1. Арифметические: + - * / %
1. Побитовые: & | ^ ~ << >>
1. Сравнения: == != < > <= >= <=> (since C++20, spaceship operator)
1. Логические операторы: && || !

    **!** Вычисления ленивые
1. Инкремент и декремент: ++ --
1. Присваивание (+ составное):  =  +=  -=  *=  /=  %=  &=  |=  ^=  <<=  >>=
    
    **!** Эти операторы возвращают результат операции, то есть можно писать `a = b = c`. Вычисляются они в таком случае справа налево, то есть это эквиваленто `a = (b = c)`.
    
    "=" не всегда является оператором. Например в строчке `int x = 5;` "=" это не оператор.

    Начиная с C++17 гарантируется что правая часть от оператора `=` вычисляется первой (`++x = x++`).
1. `sizeof` (оператор из языка Си): возвращает количество байт, которое занимает объект в памяти. 

    ```C++
        sizeof(int) // 4
        int x;
        sizeof(x) // 4
    ```

    Важно понимать, что `sizeof` вычисляет ответ на этапе компиляция и это всегда константа. Он не знает, сколько динамической памяти будет использовано. То есть `sizeof` от вектора не зависит от количества элементов внутри. Также это значит, что результат выражения, переданного в `sizeof` не вычисляется: `sizeof(x++)` x не изменяет.

1. Тернарный оператор: `condition ? expression_if_true : expression_if_false`
1. Оператор запятая: `expr1, expr2`: вычисляет `expr1`, затем `expr2` (посследовательность гарантирована) и возвращает результат `expr2`
1. Вызов функции (оператор круглые скобочки)
1. subscript operator (квадратные скобочки)

#### 2. Приоритеты операторов

https://en.cppreference.com/w/cpp/language/operator_precedence

#### 3. Value category

Каждое выражение относится к одной из двух категорий: **lvalue** и **rvalue**. *Неформально*, lvalue -- то, чему можно присваивать, а rvalue -- наоборот

```C++
++x = x++; // OK
x++ = ++x; // не OK (CE)
++x++; // не ОК (CE)
```

### 7. Control statements

#### 1. if-statement

```C++
if (condition) {
    statements;
}
```

Если всего один statement, то можно опустить фигурные скобки, но по кодстайлу так делать плохо!

```C++
if (condition) {
    if_true_statements;
} else {
    if_false_statements; 
}
```

Начиная с C++17:

```C++
if (init_statement; condition) {
    if_true_statements;
} 
```
что эквивалентно:

```C++
{ // <- объявление действительно только на момент if'а
    init_statement;
    if (condition) {
        if_true_statements;
    } 
}
```

#### 2. Switch statement

```C++
switch (expression) {
    case label1:
        statements;
    case label2:
        statements;
        break; // выход
    default: // если не подошла ни одна из меток выше
        statements;
}
```

#### 3. for-loop

```C++
for (init-statement; condition; expression) {
    statements;
}
```

Дополнительные возможности:

* `break` -- выйти из цикла (немедленно)
* `continue` -- переходить к следующей итерации (с выполнением expression)
* ~~goto and labels~~ забыть и не вспоминать

#### 4. while and do-while

```C++
while (condition) {
    statements;
}
```
```C++
do {
    statements;
} while (condition);
```